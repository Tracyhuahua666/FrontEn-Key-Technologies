# JavaScript 上下文，作用域链，闭包

## 创建上下文

当 JavaScript 代码执行一段可执行代码时，会创建对应的执行上下文。对于每个执行上下文，都有三个重要属性：

### 1.this

在全局执行上下文中，this 总是指向全局对象，在函数执行上下文中，this 一般指向调用函数的对象

### 2.变量对象

全局上下文中的变量对象就是全局对象呐！
函数上下文的变量对象是指存储了在上下文中定义的变量和函数声明。

未进入执行阶段之前，变量对象(VO)中的属性都不能访问！但是进入执行阶段之后，变量对象(VO)转变为了活动对象(AO)，里面的属性都能被访问了，然后开始进行执行阶段的操作。

### 3.作用域链

#### 作用域：作用域决定了代码区块中变量和其他资源的可见性。（全局作用域、函数作用域、块级作用域）

#### 作用域链：从当前作用域开始一层层往上找某个变量，如果找到全局作用域还没找到，就放弃寻找 。这种层级关系就是作用域链。

## 上下文的执行

JS 代码首次运行，都会先创建一个全局执行上下文并压入到执行栈中，之后每当有函数被调用，都会创建一个新的函数执行上下文并压入栈内；

## 闭包是什么

闭包 = 函数 + 函数能够访问的自由变量。

闭包是指那些能够访问自由变量的函数。 自由变量是指在函数中使用的，但既不是函数参数也不是函数的局部变量的变量。

为什么闭包函数可以访问到自由变量：通过作用域链层层往上查找。

简单回答：
是什么：
闭包就是指有权访问另一个函数作用域中的变量的函数。
如何实现：
通过作用域链层层往上查找变量
问题：
内存泄漏
解决方案：
解决闭包带来的内存泄漏问题的方法是：使用完闭包函数后手动释放
